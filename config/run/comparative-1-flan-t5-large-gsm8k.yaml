# Run configuration for baseline method
# Fixed-K CoT Self-Consistency (SC)

# [VALIDATOR FIX - Attempt 2]
# [PROBLEM]: Missing mandatory value: inference.method
# [CAUSE]: Config group files place their top-level keys under the group namespace (cfg.run),
#          but the code expects inference and optuna at the root level (cfg.inference, cfg.optuna).
#          Without a package directive, Hydra places all keys from this file under cfg.run.
# [FIX]: Add "# @package _global_" directive to place the config contents at root level,
#        AND wrap run-specific fields (run_id, method_type, etc.) under a 'run:' key
#        so they end up at cfg.run.* where the code expects them.
#
# [OLD CODE]:
# (no package directive)
# run_id: comparative-1-flan-t5-large-gsm8k
# method_type: comparative-1
# ...
#
# [NEW CODE]:
# @package _global_

# [VALIDATOR FIX - Attempt 1 - REVERSED by Attempt 2]
# [PROBLEM]: ConfigAttributeError: Key 'run_id' is not in struct (cfg.run.run_id)
# [CAUSE]: When Hydra loads a config group file from 'config/run/', it merges the 
#          TOP-LEVEL keys from that file into the config under the group name.
#          The original file had 'run:' as a top-level key, creating cfg.run.run 
#          instead of cfg.run directly containing run_id.
# [FIX]: Removed the 'run:' wrapper so the fields (run_id, method_type, etc.) 
#        are at the top level of this file and get placed directly under cfg.run
# NOTE: This fix is now reversed by Attempt 2 which uses @package _global_
#
# [OLD CODE]:
# run:
#   run_id: comparative-1-flan-t5-large-gsm8k
#   method_type: comparative-1
#   method_name: CoT-SC
#   description: "Fixed-K Chain-of-Thought with Self-Consistency (plurality voting baseline)"
#
# [NEW CODE (restored with @package _global_)]:
run:
  run_id: comparative-1-flan-t5-large-gsm8k
  method_type: comparative-1
  method_name: CoT-SC
  description: "Fixed-K Chain-of-Thought with Self-Consistency (plurality voting baseline)"

# Inference configuration
inference:
  method: cot_sc
  
  # Fixed-budget CoT self-consistency parameters
  k_cot_samples: 16  # Same budget as DT-SEACoT's max
  cot_max_tokens: 256
  cot_temperature: 0.7
  
  # No gating or early stopping for baseline
  gate_confidence_threshold: 0.0  # Always run full CoT
  early_stop_enabled: false
  
  # Simple plurality voting (no self-entailment weighting)
  use_self_entailment: false
  
  # Logging
  log_intermediate_steps: true

# Optuna hyperparameter search
optuna:
  enabled: true
  n_trials: 20
  study_name: cot_sc_gsm8k_tuning
  
  # Parameters to optimize
  search_space:
    cot_temperature:
      type: float
      low: 0.5
      high: 1.0
  
  # Optimization objective
  direction: maximize
  metric: accuracy
